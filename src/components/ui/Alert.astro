---
type Variant = "info" | "success" | "warning" | "error";

const { variant = "info", class: className = "" } = Astro.props as {
  variant?: Variant;
  class?: string;
};

/* --- Clases base --- */
const baseClasses = ["rounded-lg", "border", "p-4"];

/* --- Variantes sem√°nticas --- */
const variantClasses: Record<Variant, string[]> = {
  info: [
    "bg-(--color-surface-elevated)",
    "border-(--color-surface-stroke)",
    "text-(--color-text-primary)",
  ],
  success: [
    "bg-(--color-surface-elevated)",
    "border-(--color-status-success)",
    "text-(--color-text-primary)",
  ],
  warning: [
    "bg-(--color-surface-elevated)",
    "border-(--color-status-warning)",
    "text-(--color-text-primary)",
  ],
  error: [
    "bg-(--color-surface-elevated)",
    "border-(--color-status-error)",
    "text-(--color-text-primary)",
  ],
};

const role = variant === "error" || variant === "warning" ? "alert" : "status";

const classes = [...baseClasses, ...variantClasses[variant], className].join(
  " "
);
---

<div class={classes} role={role}>
  {
    Astro.slots.title && (
      <div class="mb-1 font-medium">
        <slot name="title" />
      </div>
    )
  }

  <div
    class={Astro.slots.title
      ? "text-sm text-(--color-text-muted)"
      : "text-sm text-(--color-text-primary)"}
  >
    <slot />
  </div>

  {
    Astro.slots.actions && (
      <div class="mt-3 flex gap-2">
        <slot name="actions" />
      </div>
    )
  }
</div>
